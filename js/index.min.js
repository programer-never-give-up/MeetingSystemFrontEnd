function wheelList(ulObject,showNum=3,timeStep=10000){var $ul=ulObject;$ul.children('li').css('position','absolute');var liNum=$ul.children('li').length;var outerheight=$ul.children('li:first').outerHeight();function moveUp(dis){$ul.find('li').each(function(index){let top=$(this).position().top;top-=dis;$(this).animate({top:top},400,'linear',function(){if(top<=-dis){$(this).css('top',outerheight*(liNum-1)+'px');}})});}
if(liNum<=showNum){showNum=liNum;}
$ul.innerHeight(outerheight*showNum);function scorll(){}
if(showNum<liNum){setInterval(function(){moveUp(outerheight)},timeStep);}}
function renderIndex(data){for(var i=0;i<data.list_activity.length;i++){var $itemCard=$('<li class="item-card" style="width:100%;"></li>');var $imgDiv=$('<h1><img src="'+data.list_activity[i].logo+'"></h1>');var $infoDiv=$('<div class="item-info"></div>');var $titleLink=$('<a><h2></h2></a>');$titleLink.attr('href','show_meeting_info.html?id='+data.list_activity[i].uuid_act);$titleLink.children('h2').text(data.list_activity[i].name_act);$infoDiv.append($titleLink);var $timeh=$('<h3></h3>');$timeh.html('时间:'+data.list_activity[i].start_time+'—'+data.list_activity[i].end_time);$infoDiv.append($timeh);var $locationh=$('<h3></h3>');$locationh.html('地点：'+data.list_activity[i].location);$infoDiv.append($locationh);var $organizerh=$('<h3></h3>');$organizerh.html("主办方:"+data.list_activity[i].organizer);$infoDiv.append($organizerh);var $btnLink=$('<a><button class="btn btn-primary">查看详情</button></a>');$btnLink.attr('href','show_meeting_info.html?id='+data.list_activity[i].uuid_act);console.log(data);$infoDiv.append($btnLink);$itemCard.append($imgDiv);$itemCard.append($infoDiv);$('#recommend').append($itemCard);var outerHeight=200;$itemCard.css('top',outerHeight*i+'px');}}
function renderRecent(data){for(var i=0;i<data["list_activity"].length;i++)
{var $itemCard=$('<li class="recent_activity_item"></li>');var $img=$('<img class="align-middle">');$img.attr('src',data['list_activity'][i]["logo"]);$itemCard.append($img);var $itemInfo=$('<div class="d-inline-block align-middle ml-2"></div>');var $titleLink=$('<a><h3></h3></a>');$titleLink.children('h3').text(data["list_activity"][i]["name_act"]);$titleLink.attr('href','show_meeting_info.html?id='+data["list_activity"][i]["uuid_act"]);$itemInfo.append($titleLink);$itemInfo.append('<div class="recent_activity_info"></div>');$itemInfo.children('div.recent_activity_info').append('<span>'+data["list_activity"][i]["start_time"].split(' ')[0]+" ");$itemInfo.children('div.recent_activity_info').append('<span>'+data["list_activity"][i]["location"]);$itemCard.append($itemInfo);$('#latestAct').append($itemCard);var outerHeight=$itemCard.outerHeight();$itemCard.css('top',outerHeight*i+'px');}}
function Render()
{$.ajax({url:"api/yw/showRecommendation/",dataType:"json",type:"GET",success:function(data)
{toastMessage(data['message']);renderIndex(data);wheelList($('#recommend'),3,5000);},error:function()
{toastMessage("加载出现问题，请刷新页面重试");}});$.ajax({url:"api/yw/showRecent/",dataType:"json",type:"GET",success:function(data)
{toastMessage(data['message']);renderRecent(data);wheelList($('#latestAct'),5,5000);},error:function()
{toastMessage("加载出现问题，请刷新页面重试");}});}